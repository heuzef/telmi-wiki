<!doctype html>
<html lang="en">

<head>
        <title>Cr√©er un store - Telmi Wiki</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        
        
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="../../assets/css/darcula-highlight.min.css">

        <link rel="stylesheet" href="../../assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="../../assets/css/dracula-ui.min.css">
        <link rel="stylesheet" href="../../assets/css/mkdocs.min.css">

        
            <link  rel="icon" type="image/x-icon" href="../../assets/img/favicon.ico">
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
                <script>hljs.initHighlightingOnLoad();</script>

</head>

<body class="drac-bg-black-secondary drac-text-grey-ternary drac-text drac-scrollbar-purple">

    <main class="d-flex">

        <!-- block sidebar -->
            <nav id="sidebar" class="sidebar drac-bg-black">
    <div class="custom-menu">
        <button type="button" id="sidebarCollapse" class="btn btn-primary">
            <i class="fa fa-bars"></i>
            <span class="sr-only">Menu</span>
        </button>
    </div>

    <div class="p-4">
        
            <img class="logo" src="../../assets/img/telmi-wiki.png" height="150px">
        

        <div class="drac-text-center">
            
                <span class="drac-text drac-line-height drac-text-white">Telmi Wiki</span>
            
        </div>

        <div class="drac-box flex-column">
            <ul class="dot-ul">
                <li><div class="dot-li drac-bg-cyan"></div></li>
                <li><div class="dot-li drac-bg-green"></div></li>
                <li><div class="dot-li drac-bg-orange"></div></li>
                <li><div class="dot-li drac-bg-pink"></div></li>
                <li><div class="dot-li drac-bg-purple"></div></li>
                <li><div class="dot-li drac-bg-red"></div></li>
                <li><div class="dot-li drac-bg-yellow"></div></li>
            </ul>
        </div>

        <hr class="drac-divider" />

        <!-- block menu -->
        <ul class="mb-5 drac-list drac-list-none">
            
            <li class="drac-box">
                <a href="../.."
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    ‚ú® Accueil
                </a>
            </li>
            <li class="drac-box">
                <a href="../.."
                    class=" active 
                    drac-anchor btn-toggle d-inline-flex align-items-center border-0 drac-text-purple--hover collapsed"
                    data-bs-toggle="collapse" data-bs-target="#üõçÔ∏è-stores-collapse" aria-expanded="false">
                    üõçÔ∏è Stores
                </a>
                <div class="collapse" id="üõçÔ∏è-stores-collapse">
                    <ul class="mb-5 drac-list drac-list-none">
                            
    <li class="drac-box-ternary">
        <a href="../stores_internationaux/"
            class="
            drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
            Stores internationaux
        </a>
    </li>
                            
    <li class="drac-box-ternary">
        <a href="./"
            class=" active 
            drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
            Cr√©er un store
        </a>
    </li>
                    </ul>
                </div>
            </li>
            <li class="drac-box">
                <a href="../.."
                    class="
                    drac-anchor btn-toggle d-inline-flex align-items-center border-0 drac-text-purple--hover collapsed"
                    data-bs-toggle="collapse" data-bs-target="#üí≥-achats-collapse" aria-expanded="false">
                    üí≥ Achats
                </a>
                <div class="collapse" id="üí≥-achats-collapse">
                    <ul class="mb-5 drac-list drac-list-none">
                            
    <li class="drac-box-ternary">
        <a href="../../achats/miyoo_mini_plus/"
            class="
            drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
            Miyoo Mini Plus
        </a>
    </li>
                            
    <li class="drac-box-ternary">
        <a href="../../achats/carte_sd/"
            class="
            drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
            Carte SD
        </a>
    </li>
                    </ul>
                </div>
            </li>
            <li class="drac-box">
                <a href="../.."
                    class="
                    drac-anchor btn-toggle d-inline-flex align-items-center border-0 drac-text-purple--hover collapsed"
                    data-bs-toggle="collapse" data-bs-target="#üé≠-cultures-collapse" aria-expanded="false">
                    üé≠ Cultures
                </a>
                <div class="collapse" id="üé≠-cultures-collapse">
                    <ul class="mb-5 drac-list drac-list-none">
                            
    <li class="drac-box-ternary">
        <a href="../../wip/"
            class="
            drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
            Page en construction
        </a>
    </li>
                    </ul>
                </div>
            </li>
            <li class="drac-box">
                <a href="../.."
                    class="
                    drac-anchor btn-toggle d-inline-flex align-items-center border-0 drac-text-purple--hover collapsed"
                    data-bs-toggle="collapse" data-bs-target="#ü™Ñ-cr√©ations-collapse" aria-expanded="false">
                    ü™Ñ Cr√©ations
                </a>
                <div class="collapse" id="ü™Ñ-cr√©ations-collapse">
                    <ul class="mb-5 drac-list drac-list-none">
                            
    <li class="drac-box-ternary">
        <a href="../../wip/"
            class="
            drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
            Page en construction
        </a>
    </li>
                    </ul>
                </div>
            </li>
            <li class="drac-box">
                <a href="../.."
                    class="
                    drac-anchor btn-toggle d-inline-flex align-items-center border-0 drac-text-purple--hover collapsed"
                    data-bs-toggle="collapse" data-bs-target="#ü™õ-bricolages-collapse" aria-expanded="false">
                    ü™õ Bricolages
                </a>
                <div class="collapse" id="ü™õ-bricolages-collapse">
                    <ul class="mb-5 drac-list drac-list-none">
                            
    <li class="drac-box-ternary">
        <a href="../../wip/"
            class="
            drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
            Page en construction
        </a>
    </li>
                    </ul>
                </div>
            </li>
            <li class="drac-box">
                <a href="../.."
                    class="
                    drac-anchor btn-toggle d-inline-flex align-items-center border-0 drac-text-purple--hover collapsed"
                    data-bs-toggle="collapse" data-bs-target="#üöÄ-developments-collapse" aria-expanded="false">
                    üöÄ Developments
                </a>
                <div class="collapse" id="üöÄ-developments-collapse">
                    <ul class="mb-5 drac-list drac-list-none">
                            
    <li class="drac-box-ternary">
        <a href="../../wip/"
            class="
            drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
            Page en construction
        </a>
    </li>
                    </ul>
                </div>
            </li>
        </ul>
        <!-- endblock -->
    </div>
</nav>
        <!-- endblock -->

        <nav class="divider drac-bg-purple-cyan"></nav>

        <div class="content">
            <!-- block header -->
                <header>
    <nav class="navbar navbar-expand-xl drac-bg-purple">
        <div class="container-fluid">
            
            <button class="navbar-toggler w-100 text-center" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMenu"
                aria-controls="navbarsMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse flex-column ml-auto" id="navbarsMenu">
                <ul class="navbar-nav text-md-center">

                    <!-- block preview -->
                    <li class="nav-item">
                            
        <div class="container">
            <div class="row row-preview">
                <div class="col">
                    <a href="../stores_internationaux/"
                        class="btn-preview drac-btn drac-btn-outline drac-text-white drac-text-cyan-green--hover">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </div>
                <div class="col">
                    <a href="../../achats/miyoo_mini_plus/"
                        class="btn-preview drac-btn drac-btn-outline drac-text-white drac-text-cyan-green--hover" style="padding-left: 3%;">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
                    </li>
                    <!--  endblock -->

                    <!-- block search -->
                    <li class="nav-item"><div role="search" class="search-box">
	<form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
		<input type="text" name="q" class="drac-input drac-input-search drac-input-white drac-text-white drac-bg-black-secondary"
		placeholder="Search docs" title="Type search term here" />
	</form>
</div>
                    </li>
                    <!--  endblock -->

                    <!-- block source -->
                    <li class="nav-item">
                        
                    </li>
                    <!--  endblock -->

                </ul>
            </div>

        </div>
    </nav>
</header>
            <!-- endblock -->

            <!-- block content -->
                <section class="p-md-5 section-content">
    <article>
        <p><h1 id="creer-un-store-telmi">Cr√©er un store Telmi</h1>
<p>Cette documentation explique en d√©tail comment mettre en production un store Telmi pour h√©berger des packs d'histoire.</p>
<p>Elle s'adresse donc √† vous si :</p>
<ul>
<li>Vous avez la volont√© de g√©rer et maintenir un store Telmi.</li>
<li>Vous poss√©dez un compte Github et vous savez comment l'utiliser.</li>
</ul>
<p>Vous √™tes partant ? Super ! N'h√©sitez pas √† demander de l'aide √† la communaut√© Telmi !</p>
<h2 id="structure-dun-store-telmi">Structure d'un store Telmi</h2>
<p>Un store Telmi est basiquement un fichier JSON qui est appel√© sur le logiciel Telmi-Sync, ce dernier contient toutes les informations des packs d'histoire. Il est resynchronis√© √† chaque lancement du logiciel. Votre r√¥le est donc de faire en sorte que ce fichier JSON soit r√©guli√®rement mis √† jour et publiquement accessible. Pour cela, deux services sont donc exploit√©s : Github et Deno. Github h√©berge les histoires, les informations et met √† disposition le fichier JSON du store. Deno de son c√¥t√©, sert uniquement √† d√©clencher la mise √† jour quotidienne du fichier JSON.</p>
<h2 id="notre-store-exemple">Notre store exemple</h2>
<blockquote>
<p>‚ö†Ô∏è Dans la suite de cette documentation, c'est le store <code>telmi-store-en</code> qui sera pris en exemple, remplacez donc <strong>syst√©matiquement</strong> ce dernier par votre propre nom de Store ‚ö†Ô∏è</p>
</blockquote>
<h2 id="creation-dune-organisation-github">Cr√©ation d'une organisation Github</h2>
<p>Identifiez-vous sur Github puis d√©butez la cr√©ation d'une organisation avec le nom de votre store.</p>
<p><img alt="" src="../assets/img/github_01.png" /></p>
<p><img alt="" src="../assets/img/github_02.png" /></p>
<p>Vous pouvez √©galement ajouter quelques √©minents membres de la communaut√© Telmi en soutient ü§™</p>
<p><img alt="" src="../assets/img/github_03.png" /></p>
<p>Commencez √† personaliser l'organisation : </p>
<ul>
<li>Nom : <code>Telmi Store EN</code></li>
<li>Une description</li>
<li>Le lien vers <code>https://telmi.fr</code></li>
<li>Une ic√¥ne personnalis√©e, vous pouvez utiliser <a href="https://github.com/heuzef/telmi-wiki/raw/refs/heads/gh-pages/stores/assets/files/telmi-icon-flag.xcf">ce template XCF</a> avec <a href="https://www.gimp.org">GIMP</a> si besoin pour cr√©er votre ic√¥ne.</li>
</ul>
<p><img alt="" src="../assets/img/github_04.png" /></p>
<p>Votre organisation est pr√™te, il est temps d'initialiser le premier d√©p√¥t <code>.github</code>, c'est un d√©p√¥t de configuration sp√©cial.</p>
<p><img alt="" src="../assets/img/github_05.png" /></p>
<p>Ajoutez ce dernier en acc√®s public.</p>
<p><img alt="" src="../assets/img/github_06.png" /></p>
<p>Ce store doit √™tre initialis√© avec quelques fichiers, dossier et surtout la banni√®re traduite dans votre langue. Pour faire ceci, reprenez la structure des d√©p√¥ts existants, par exemple : </p>
<ul>
<li><a href="https://github.com/telmi-store/.github/archive/refs/heads/main.zip">https://github.com/telmi-store/.github/archive/refs/heads/main.zip</a></li>
<li><a href="https://github.com/telmi-store-en/.github/archive/refs/heads/main.zip">https://github.com/telmi-store-en/.github/archive/refs/heads/main.zip</a></li>
<li><a href="https://github.com/telmi-store-cn/.github/archive/refs/heads/main.zip">https://github.com/telmi-store-cn/.github/archive/refs/heads/main.zip</a></li>
</ul>
<p>etc ...</p>
<p>Pour concevoir la banni√®re, vous pouvez utiliser <a href="https://github.com/heuzef/telmi-wiki/raw/refs/heads/gh-pages/stores/assets/files/banner-telmi.xcf">ce template XCF</a> avec <a href="https://www.gimp.org">GIMP</a> si besoin pour la concevoir.</p>
<p><img alt="" src="../assets/img/gimp_01.png" /></p>
<p><img alt="" src="../assets/img/gimp_02.png" /></p>
<p>Voici quelques instructions pour vous aidez √† initialiser ce d√©p√¥t :</p>
<pre><code># R√©cup√©rer le d√©p√¥t vide sur en local
git clone git@github.com:telmi-store-en/.github.git

# Ajoutez-y vos fichiers
mv -v mes-fichiers/* .github/

# Poussez les modifications
cd .github
git add --all
git commit -m &quot;Init repo&quot;
git branch -M main
git remote add origin git@github.com:telmi-store-en/.github.git
git push -u origin main
</code></pre>
<p>Une fois votre d√©p√¥t <code>.github</code> pr√™t, nous pouvons passer √† la mise en place du fichier GIST.</p>
<h2 id="mise-en-place-dun-gist">Mise en place d'un GIST</h2>
<p>Github GIST est la fonctionnalit√© qui rendra votre fichier JSON visible publiquement. Rendez-vous sur <a href="https://gist.github.com">https://gist.github.com</a> pour commencer √† le cr√©er en cliquant sur <strong>Create secret gist</strong>. Nommez-le puis ajouter un simple point pour l'initialiser.</p>
<p><img alt="" src="../assets/img/gist_01.png" /></p>
<p>Un fichier <code>gistfile1.txt</code> est cr√©√©, renommez-le avec un format standardis√© comme par exemple <code>telmi-interactive-en.json</code>.</p>
<p><img alt="" src="../assets/img/gist_02.png" /></p>
<p><img alt="" src="../assets/img/gist_03.png" /></p>
<p><img alt="" src="../assets/img/gist_04.png" /></p>
<p>C'est pr√™t ! R√©cup√©rez l'URL publique en cliquant sur <strong>Share</strong>.</p>
<p><img alt="" src="../assets/img/gist_05.png" /></p>
<p>Votre lien URL ressemblera √† quelque chose comme ceci :</p>
<p><code>https://gist.github.com/heuzef/c2da96666a3a84397f19576d94d15a57</code></p>
<p>Ce lien comprend l'ID de votre GIST (ici <code>c2da96666a3a84397f19576d94d15a57</code> dans cet exemple), notez-le pr√©cieusement.</p>
<p>Ainsi, le lien officiel de votre nouveau store sera donc structur√© ainsi :</p>
<p><code>https://gist.githubusercontent.com/heuzef/c2da96666a3a84397f19576d94d15a57/raw/telmi-interactive-en.json</code></p>
<p>Adaptez ce lien avec votre ID GIST et nom du fichier, vous devriez ainsi pouvoir consulter votre fichier JSON (qui ne contient qu'un point √† ce stade). C'est √©galement ce lien, que vous pourrez ajouter sur Telmi-Sync.</p>
<p>C'est tout bon ? Super ! Nous allons pouvoir commencer la configuration de Deno, qui s'occupera de mettre √† jour quotidiennement ce fichier JSON. </p>
<p>Mais avant cela, il faut lui donner l'autorisation de le faire, nous allons donc cr√©er un Token d'acc√®s d√©di√©. Pour cela, acc√©der √† la gestion de vos Tokens.</p>
<p><img alt="" src="../assets/img/gist_06.png" /></p>
<p><img alt="" src="../assets/img/gist_07.png" /></p>
<p><img alt="" src="../assets/img/gist_08.png" /></p>
<p>Vous pouvez directement commencer la cr√©ation de votre Token via ce lien : <a href="https://github.com/settings/tokens/new">https://github.com/settings/tokens/new</a></p>
<p>Donnez-lui un nom parlant, par exemple <code>telmi-store-gists</code> et surtout sp√©cifiez bien que ce dernier <strong>n'a pas de date d'expiration</strong>.</p>
<p>Finalement, pour les permissions (Select scopes), sp√©cifiez uniquement l'acc√®s √† <strong>gist</strong>.</p>
<p><img alt="" src="../assets/img/gist_09.png" /></p>
<p>√Ä la cr√©ation, le Token appara√Ætra en clair, <strong>notez-le pr√©cieusement</strong>, car vous n'aurez plus acc√®s √† ce dernier apr√®s. </p>
<p>Votre token ressemble √† ceci :</p>
<p><code>github_pat_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code></p>
<p><strong>Ne partagez jamais ce dernier √† qui que ce soit.</strong></p>
<h2 id="configuration-du-serveur-de-synchronisation-deno">Configuration du serveur de synchronisation Deno</h2>
<p>Deno est un service open-source d'ex√©cution de code Javascript. Nous allons exploiter ce dernier car il dispose d'une fonction <a href="https://fr.wikipedia.org/wiki/Cron">CRON</a>, ce qui nous sera fort utile pour ex√©cuter quotidiennement un script TS qui va :</p>
<ul>
<li>Parser les diff√©rents d√©p√¥ts de notre organisation sur Github</li>
<li>En extraire toutes les informations des packs d'histoire</li>
<li>G√©n√©rer le fichier JSON de notre store</li>
<li>Pousser ce dernier sur GIST pour forcer son actualisation</li>
</ul>
<p>Vous pouvez donc <a href="https://console.deno.com/login">commencer par vous authentifier sur le site de Deno</a> (avec votre compte Github).</p>
<p><img alt="" src="../assets/img/deno_01.png" /></p>
<p>Installez ensuite Deno sur votre machine : </p>
<p><code>curl -fsSL https://deno.land/install.sh | sh</code></p>
<p>Puis finalement, installez √©galement l'outil de gestion (CLI) qui nous servira √† d√©ployer notre projet :</p>
<pre><code>deno install -gArf jsr:@deno/deployctl
export PATH=&quot;/home/$USER/.deno/bin:$PATH&quot; # Definir la variable PATH pour pouvoir executer deployctl
</code></pre>
<p>Nous allons √† pr√©sent initialiser le projet, voici √† quoi doit ressembler votre dossier ce travail :</p>
<pre><code>telmi-store-en
‚îî‚îÄ‚îÄ src
    ‚îî‚îÄ‚îÄ main.ts
</code></pre>
<pre><code>mkdir telmi-store-en
mkdir telmi-store-en/src
touch telmi-store-en/src/main.ts
</code></pre>
<p>Cr√©er votre fichier main.ts :</p>
<pre><code>const
strFormat = (str) =&gt; str.replace(/[^\u0020-\ucfbf\u000A]+/g, ' ').trim(),
imageExists = (url) =&gt; {
    return new Promise((resolve, reject) =&gt; {
        fetch(url, { method: 'HEAD' })
        .then((res) =&gt; {
            if (res.status !== 200) {
                return resolve(false)
            }
            resolve(true)
        })
        .catch(() =&gt; {
            resolve(false)
        })
    })
}


Deno.serve(() =&gt; new Response('API d\'histoires', {
    status: 200,
    headers: { 'content-type': 'text/html; charset=utf-8' }
}))

const githubToTelmi = async (gist, filename, repoURI, banner, background, link) =&gt; {
    let data = []

    const repos = await (await fetch('https://api.github.com/orgs/' + repoURI + '/repos', { headers: { accept: 'application/json' } })).json()
    for (const repo of repos) {
        repo.thumbnail = 'https://raw.githubusercontent.com/' + repoURI + '/' + repo.name + '/main/thumbnail.jpg'
        if (await imageExists(repo.thumbnail)) {
            repo.releases = await (await fetch(repo.url + '/releases', { headers: { accept: 'application/json' } })).json()
        } else {
            repo.releases = []
        }
    }

    data = repos.reduce(
        (acc, repo) =&gt; {
            if (!repo.releases.length || !repo.releases[0].assets.length) {
                return acc
            }

            const title = [...repo.description.matchAll(/^\[([0-9]+)\+](.*)\(([A-Z]+)\)$/g)]

            if (!title.length) {
                return acc
            }

            const url = repo.releases[0].assets.reduce(
                (acc, v) =&gt; {
                    if (v.browser_download_url.substring(v.browser_download_url.length - 4) === '.zip') {
                        return v.browser_download_url
                    }
                    return acc
                },
                ''
            )

            if (url === '') {
                return acc
            }

            const downloadCount = repo.releases.reduce(
                (acc, release) =&gt; release.assets.reduce((acc, v) =&gt; acc + v.download_count, acc),
                                                       0
            )

            const details = repo.releases[0].body.replace('\r', '').split('\n').reduce(
                (acc, line) =&gt; {
                    if (line.substring(0, 1) !== '&gt;') {
                        acc.description = acc.description + '\n' + line
                        return acc
                    }
                    const colonPos = line.indexOf(':', 1)
                    if (colonPos === -1) {
                        acc.description = acc.description + '\n' + line
                        return acc
                    }
                    return {
                        ...acc,
                        [line.substring(1, colonPos).trim().toLowerCase()]: line.substring(colonPos + 1).trim()
                    }
                },
                { description: '' }
            )

            return [
                ...acc,
                Object.assign({
                    age: parseInt(strFormat(title[0][1]), 10),
                              title: strFormat(title[0][2]),
                              description: strFormat(details.description),
                              thumbs: {
                                  small: repo.thumbnail,
                                  medium: repo.thumbnail
                              },
                              download: strFormat(url),
                              download_count: downloadCount,
                              awards: details.awards !== undefined ? details.awards.substring(1).split('#').map((v) =&gt; strFormat(v.trim())) : [],
                              created_at: repo.releases[repo.releases.length - 1].published_at,
                              updated_at: repo.releases[0].published_at
                },
                details.uuid !== undefined ? { uuid: details.uuid } : null,
                details.author !== undefined ? { author: details.author } : null,
                details.voice !== undefined ? { voice: details.voice } : null,
                details.designer !== undefined ? { designer: details.designer } : null,
                details.publisher !== undefined ? { publisher: details.publisher } : null,
                details.category !== undefined ? { category: details.category } : null,
                details.version !== undefined ? { version: details.version } : null,
                details.license !== undefined ? { license: details.license } : null
                )
            ]
        },
        data
    )

    const
    dateIso = (new Date()).toISOString().split('T'),
    date = dateIso[0] + ' ' + dateIso[1].substring(0, 8)

    await fetch(
        'https://api.github.com/gists/' + gist,
        {
            method: 'PATCH',
            headers: {
                Authorization: 'Bearer github_pat_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
                Accept: 'application/vnd.github+json',
                'X-GitHub-Api-Version': '2022-11-28',
            },
            body: JSON.stringify({
                description: 'Update ' + repoURI + ' (' + date + ')',
                                 files: {
                                     [filename]: { content: JSON.stringify({ banner: { image: banner, background, link }, data }) }
                                 }
            })
        }
    )
}


Deno.cron('telmi-interactive-en', '0 1,13 * * *', async () =&gt; {
    await githubToTelmi('c2da96666a3a84397f19576d94d15a57', 'telmi-interactive-en.json', 'telmi-store-en', 'https://raw.githubusercontent.com/telmi-store-en/.github/master/profile/banner-telmi.jpg', '#2e144b', 'https://discord.gg/ZTA5FyERbg')
})
</code></pre>
<p><strong>Adaptez ce fichier pour indiquer le Token (Ligne "Authorization"), l'ID GIST et le Code pays sur les derni√®res lignes du script.</strong></p>
<p>Maintenant que votre fichier <code>main.ts</code> est pr√™t, nous pouvons effectuer le d√©ploiement sur Deno :</p>
<pre><code>cd telmi-store-en
deployctl deploy --prod --project=telmi-store-en --unstable src/main.ts
</code></pre>
<p>Une demande d'autorisation est demand√©e pour poursuivre.</p>
<p><img alt="" src="../assets/img/deno_02.png" /></p>
<p>Si le d√©ploiement r√©ussis, vous devriez avoir un service accessible sur un domaine comme par exemple : <code>https://telmi-store-en.deno.dev</code> , mais √©galement un fichier <code>deno.json</code> cr√©√© par le d√©ploiement.</p>
<p><img alt="" src="../assets/img/deno_03.png" /></p>
<p>Finalement, RDV sur <a href="https://dash.deno.com">https://dash.deno.com</a> pour visualiser l'√©tat de l'ex√©cution du script par CRON. Le statut "Last Run" doit indiquer "Succeeded".</p>
<h2 id="creation-dun-premier-pack-dhistoire">Cr√©ation d'un premier pack d'histoire</h2>
<blockquote>
<p>‚ö†Ô∏è La cr√©ation des packs d'histoire doit √™tre tr√®s rigoureusement g√©r√©, autrement, l'ex√©cution du script quotidien sur Deno √©chouera si l'un de vos packs d'histoire est mal configur√©, pouvant rendre alors votre store hors service ‚ö†Ô∏è</p>
</blockquote>
<p>Pour que la synchronisation puisse fonctionner, il vous faut initialiser un premier pack d'histoire, afin de voir appara√Ætre ce dernier sur telmi-sync.</p>
<p>Donc c'est parti mon Telmi, retournons sur notre organisation Github, pour cr√©er un nouveau d√©p√¥t. Prenez exemple des d√©p√¥ts d'histoire existants, par exemple : <a href="https://github.com/orgs/telmi-store/repositories">https://github.com/orgs/telmi-store/repositories</a></p>
<p>Chaque d√©p√¥t est structur√© tr√®s pr√©cis√©ment, donc soyez tr√®s rigoureux, mais globalement, vous y retrouverez la m√™me logique de structure avec quelques fichiers √† modifier.</p>
<p><img alt="" src="../assets/img/github_07.png" /></p>
<p>Puis, une fois votre d√©p√¥t pr√™t, vous pourrez cr√©er une "Realease" dans le menu du m√™me nom, qui contiendra votre pack d'histoire au format <strong>ZIP</strong>.</p>
<ul>
<li>Ajouter un nom avec la nomenclature des noms de pack (√¢ge, titre, langue)</li>
<li>Cr√©er un tag <code>latest</code> pour cette release</li>
<li>Ajouter la description, attention au format du contenu, c'est ce dernier qui est analys√© sur le store</li>
<li>Ajouter enfin le pack d'histoire au format <strong>ZIP</strong></li>
</ul>
<p><img alt="" src="../assets/img/github_08.png" /></p>
<p>Pour terminer, n'oubliez pas d'ajouter une description √† votre d√©p√¥t, avec le nom du pack d'histoire utilisant la nomenclature des noms de pack (√¢ge, titre, langue), autrement, le script planifi√© par CRON sur Deno sera en √©chec.</p>
<p><img alt="" src="../assets/img/github_09.png" /></p>
<p>C'est tout bon, v√©rifiez bien le lendemain que votre nouveau pack d'histoire est correctement visible sur Telmi-Sync, puis r√©p√©ter l'op√©ration pour chaque pack d'histoire üí™</p>
<hr /></p>
    </article>
</section>
            <!-- endblock -->

            <!-- block footer -->
                <footer>
    <div class="d-flex flex-sm-row justify-content-between py-2 border-top drac-text-black drac-bg-cyan-green">
        <a href="https://github.com/dracula/mkdocs" target="_blank" style="padding-left: 1%;"
            class="footer-text drac-anchor drac-text-black drac-text-purple--hover">
            Made with Dracula Theme for MkDocs
        </a>
    </div>
</footer>
            <!-- endblock -->
        </div>

    </main>

        <script>var base_url = '../..';</script>
        <script src="../../assets/js/jquery-3.3.1.slim.min.js"></script>
        <script src="../../assets/js/bootstrap.bundle.min.js"></script>
        <script src="../../assets/js/mkdocs.js"></script>
			<script src="../../search/main.js" defer></script>

</body>

</html>